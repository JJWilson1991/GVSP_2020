setwd("C:/Users/jjw_t/Desktop/GVSP_Project")
library(here)
Spillover1<-readxl::read_excel(here::here("Data","Virus_Spillover.xlsx")
Spillover1<-readxl::read_excel(here::here("Data","Virus_Spillover.xlsx"))
Spillover1<-readxl::read_excel(here::here("Data","Virus_Spillover.xlsx"))
View(Spillover1)
unique(Spillover1$...11)
...11
colnames(Spillover1[11]<-Host)
colnames(Spillover1[11]<-"Host")
Spillover1<-readxl::read_excel(here::here("Data","Virus_Spillover.xlsx"))
view(Spillover1)
colnames(Spillover1)[11]<-"Host"
host_table<-table(unique(Spillover1$...11))
host_table<-table(unique(Spillover1$Host))
print(host_table)
library(tidyverse)
Spillover2<-Spillover1%>%mutate(Farm=Host)
View(Spillover2)
Spillover2<-Spillover1%>%mutate(Farm=str_replace_all(Host,"Bos taurus", "Cow")
Spillover2<-Spillover1%>%mutate(Farm=str_replace_all(Host,"Bos taurus", "Cow"))
Spillover2<-Spillover1%>%mutate(Farm=str_replace_all(Host,"Bos taurus", "Cow"))
Spillover2 %<>% mutate(year=str_replace_all(str_year,"pop",""))
Spillover2<-Spillover1%>%mutate(Farm=str_replace_all(Host,"Bos taurus", "Cow"))%>%str_replace_all(Farm,"Sus scrofa", "Pig")
Spillover2<-Spillover1%>%mutate(Farm=str_replace_all(Host,"Bos taurus", "Cow"))%>%str_replace_all(Farm,"Sus scrofa", "Pig")
Spillover2<-Spillover1%>%mutate(Farm=recode(Host, "Bos taurus"="Cattle", "Sus scrofa"="Swine",  "Equus caballus"="Horse"))
Spillover2<-Spillover1%>%mutate(Farm=recode(Host, "Bos taurus"="Cattle", "Bubalus bubalis Bos indicus Bos taurus"="Cattle","Sus scrofa"="Swine",  "Equus caballus"="Horse"))
Spillover2<-Spillover1%>%mutate(Farm=recode(Host, "Bos taurus"="Cattle", "Bubalus bubalis\r\Bos indicus\r\nBos taurus"="Cattle","Sus scrofa"="Swine",  "Equus caballus"="Horse"))
Spillover1<-readxl::read_excel(here::here("Data","Virus_Spillover.xlsx"))
view(Spillover1)
colnames(Spillover1)[11]<-"Host"
host_table<-table(unique(Spillover1$Host))
Spillover2<-Spillover1%>%mutate(Farm=recode(Host, "Bos taurus"="Cattle", "Bubalus bubalis Bos indicus Bos taurus"="Cattle","Sus scrofa"="Swine",  "Equus caballus"="Horse"))
Spillover2<-Spillover1%>%mutate(Farm=recode(Host, "Bos taurus"="Cattle", "Bubalus bubalis, Bos indicus, Bos taurus"="Cattle","Sus scrofa"="Swine",  "Equus caballus"="Horse"))
Spillover1<-readxl::read_excel(here::here("Data","Virus_Spillover.xlsx"))
view(Spillover1)
colnames(Spillover1)[11]<-"Host"
host_table<-table(unique(Spillover1$Host))
Spillover2<-Spillover1%>%mutate(Farm=recode(Host, "Bos taurus"="Cattle", "Bubalus bubalis, Bos indicus, Bos taurus"="Cattle","Sus scrofa"="Swine",  "Equus caballus"="Horse"))
Farm_animals<-Spillover2[grep("attle", Spillover2$Farm), ]
View(Farm_animals)
Farm_animals<-Spillover2[grep(c("attle","Swine") Spillover2$Farm), ]
Farm_animals<-Spillover2[grep("attle") Spillover2$Farm), ]
Spillover2<-Spillover1%>%mutate(Farm=recode(Host, "Bos taurus"="Cattle", "Bubalus bubalis, Bos indicus, Bos taurus"="Cattle","Sus scrofa"="Swine",  "Equus caballus"="Horse"))
Farm_animals<-Spillover2[grep("attle") Spillover2$Farm), ]
Farm_animals<-Spillover2[grep("attle", Spillover2$Farm), ]
Farm_animals<-Spillover2[grep("attle", Spillover2$Farm) ]
FA<-c("Swine", "Pigs", "pigs", "orse", "attle")
FA<-c("Swine", "Pigs", "pigs", "orse", "attle")
matches <- unique (grep(paste(Fa,collapse="|"),
Spillover2$Farm, value=TRUE))
matches <- unique (grep(paste(FA,collapse="|"),
Spillover2$Farm, value=TRUE))
matches
matches <-(grep(paste(FA,collapse="|"),
Spillover2$Farm, value=TRUE))
matches
matches <-filter(Spillover2,grep(paste(FA,collapse="|"),
Spillover2$Farm, value=TRUE))
matches <-filter(Spillover2,grepl(paste(FA,collapse="|"),
Spillover2$Farm, value=TRUE))
swn<-Spillover2[grep(FA, Spillover2$Farm), ]
View(Spillover2)
View(swn)
sdfg<-filter(Spillover2, grepl(paste(Fa, collapse="|"), Farm))
sdfg<-filter(Spillover2, grepl(paste(FA, collapse="|"), Farm))
View(sdfg)
Spillover2<-Spillover1%>%mutate(Farm=recode(Host, "Bos taurus"="Cattle", "Bubalus bubalis, Bos indicus, Bos taurus"="Cattle","Sus scrofa"="Swine",  "Equus caballus"="Horse"))
FA<-c("Swine", "Pigs", "pigs", "orse", "attle")
Farm_animals<-filter(Spillover2, grepl(paste(FA, collapse="|"), Farm))
All_associations<-read.csv2(here::here("Data","associations.csv"))
View(All_associations)
class(All_associations)
All_associations<-read_csv(here::here("Data","associations.csv"))
FA2<-filter(All_associations, c("Ovis_aries"), hHostNameFinal)
unique(All_associations$hHostNameFinal)
FA2<-c("Sus_scrofa", "Ovis_aries", "Bos_taurus", "Equus caballus", "Capra_aegagrus", "Capra_hircus", "Bubalus_bubalis",  "Cervus_elaphus",  "Cervus_nippon",  "Cervus_timorensis", "Bos_mutus", "Equus_asinus")
Farm_animals2<-filter(All_associations, grepl(paste(FA2, collapse="|"), hHostNameFinal))
View(Farm_animals2)
farm_a<-as.data.frame(unique(Farm_animals2$vVirusNameCorrected))
View(farm_a)
View(Spillover1)
colnames(farm_a)[1]<-Virus
colnames(farm_a)[1]<-"Virus"
test<-left_join(farm_a, Spillover1, by=Virus)
#lets get a list of unique viruses known to infect farm animnals
farm_a<-as.data.frame(unique(Farm_animals2$vVirusNameCorrected))
colnames(farm_a)[1]<-"Virus"
test<-left_join(farm_a, Spillover1, by="Virus")
View(test)
farm_a<-left_join(farm_a,Farm_animals2[1:2,])
colnames(Farm_animals2)[1]<-"Virus"
#lets get a list of unique viruses known to infect farm animnals
farm_a<-as.data.frame(unique(Farm_animals2$vVirusNameCorrected))
colnames(farm_a)[1]<-"Virus"
#lets get a list of unique viruses known to infect farm animnals
farm_a<-as.data.frame(unique(Farm_animals2$vVirusNameCorrected))
colnames(farm_a)[1]<-"Virus"
#pull all interactions involving farm animasl listed above
Farm_animals2<-filter(All_associations, grepl(paste(FA2, collapse="|"), hHostNameFinal))
colnames(Farm_animals2)[1]<-"Virus"
#lets get a list of unique viruses known to infect farm animnals
farm_a<-as.data.frame(unique(Farm_animals2$vVirusNameCorrected))
colnames(farm_a)[1]<-"Virus"
#lets get a list of unique viruses known to infect farm animnals
farm_a<-as.data.frame(unique(Farm_animals2$Virus))
colnames(farm_a)[1]<-"Virus"
#lets get a list of unique viruses known to infect farm animnals
farm_a<-as.data.frame(unique(Farm_animals2$Virus))
colnames(farm_a)[1]<-"Virus"
```{r}
farm_a<-left_join(farm_a,Farm_animals2[1:2,])
View(farm_a)
try<-Farm_animals2[1,2]
View(try)
try<-Farm_animals2[c(1,2),]
View(try)
try<-Farm_animals2[,c(1,2)]
View(try)
Farm_animals3<-Farm_animals2[,c(1,2)]
farm_a<-left_join(farm_a,Farm_animals3)
Spillover1<-readxl::read_excel(here::here("Data","Virus_Spillover.xlsx"))
view(Spillover1)
colnames(Spillover1)[11]<-"Host"
host_table<-table(unique(Spillover1$Host))
Spillover2<-Spillover1%>%mutate(Farm=recode(Host, "Bos taurus"="Cattle", "Bubalus bubalis, Bos indicus, Bos taurus"="Cattle","Sus scrofa"="Swine",  "Equus caballus"="Horse"))
FA<-c("Swine", "Pigs", "pigs", "orse", "attle")
Farm_animals<-filter(Spillover2, grepl(paste(FA, collapse="|"), Farm))
All_associations<-read_csv(here::here("Data","associations.csv"))
FA2<-c("Sus_scrofa", "Ovis_aries", "Bos_taurus", "Equus caballus", "Capra_aegagrus", "Capra_hircus", "Bubalus_bubalis",  "Cervus_elaphus",  "Cervus_nippon",  "Cervus_timorensis", "Bos_mutus", "Equus_asinus")
#pull all interactions involving farm animasl listed above
Farm_animals2<-filter(All_associations, grepl(paste(FA2, collapse="|"), hHostNameFinal))
colnames(Farm_animals2)[1]<-"Virus"
#lets get a list of unique viruses known to infect farm animnals
farm_a<-as.data.frame(unique(Farm_animals2$Virus))
colnames(farm_a)[1]<-"Virus"
Farm_animals3<-Farm_animals2[,c(1,2)]
farm_a<-left_join(farm_a,Farm_animals3)
test<-left_join(farm_a, Spillover1, by="Virus")
View(Farm_animals3)
View(farm_a)
#lets get a list of unique viruses known to infect farm animnals
farm_a<-as.data.frame(unique(Farm_animals2$Virus))
colnames(farm_a)[1]<-"Virus"
Farm_animals3<-Farm_animals2[,c(1,2)]
farm_b<-left_join(farm_a,Farm_animals3)
View(farm_b)
farm_b<-left_join(farm_a,Farm_animals3, by="Virus")
View(farm_b)
farm_b<-inner_join(farm_a,Farm_animals3, by="Virus")
library(here)
library(tidyverse)
Spillover1<-readxl::read_excel(here::here("Data","Virus_Spillover.xlsx"))
view(Spillover1)
colnames(Spillover1)[11]<-"Host"
host_table<-table(unique(Spillover1$Host))
Spillover2<-Spillover1%>%mutate(Farm=recode(Host, "Bos taurus"="Cattle", "Bubalus bubalis, Bos indicus, Bos taurus"="Cattle","Sus scrofa"="Swine",  "Equus caballus"="Horse"))
FA<-c("Swine", "Pigs", "pigs", "orse", "attle")
Farm_animals<-filter(Spillover2, grepl(paste(FA, collapse="|"), Farm))
All_associations<-read_csv(here::here("Data","associations.csv"))
FA2<-c("Sus_scrofa", "Ovis_aries", "Bos_taurus", "Equus caballus", "Capra_aegagrus", "Capra_hircus", "Bubalus_bubalis",  "Cervus_elaphus",  "Cervus_nippon",  "Cervus_timorensis", "Bos_mutus", "Equus_asinus")
#pull all interactions involving farm animasl listed above
Farm_animals2<-filter(All_associations, grepl(paste(FA2, collapse="|"), hHostNameFinal))
colnames(Farm_animals2)[1]<-"Virus"
#lets get a list of unique viruses known to infect farm animnals
farm_a<-as.data.frame(unique(Farm_animals2$Virus))
colnames(farm_a)[1]<-"Virus"
Farm_animals3<-Farm_animals2[,c(1,2)]
farm_b<-inner_join(farm_a,Farm_animals3, by="Virus")
test<-left_join(farm_a, Spillover1, by="Virus")
#farm_b<-inner_join(farm_a,Farm_animals3, by="Virus")
test<-left_join(farm_a, Spillover1, by="Virus")
#farm_b<-inner_join(farm_a,Farm_animals3, by="Virus")
All_farm<-left_join(farm_a, Spillover1, by="Virus")
View(All_farm)
library(visdat)
vis_miss(All_farm)
View(Farm_animals2)
All_features<-read_csv(here::here("Data", "viruses.csv"))
view(All_features)
colnames(All_features)[1]<-"Viruses"
library(here)
library(tidyverse)
library(metagear)
library(here)
metagear::abstract_screener(here::here("literature_screen_pubmed","effort_Jonny.csv"), aReviewer = "Jonny", titleColumnName = "Title")
library(metagear)
library(here)
metagear::abstract_screener(here::here("literature_screen_pubmed","effort_Jonny.csv"), aReviewer = "Jonny", titleColumnName = "Title")
library(metagear)
library(here)
metagear::abstract_screener(here::here("literature_screen_pubmed","effort_Jonny.csv"), aReviewer = "Jonny", titleColumnName = "Title")
library(metagear)
library(here)
metagear::abstract_screener(here::here("literature_screen_pubmed","effort_Jonny.csv"), aReviewer = "Jonny", titleColumnName = "Title")
library(metagear)
library(here)
metagear::abstract_screener(here::here("literature_screen_pubmed","effort_Jonny.csv"), aReviewer = "Jonny", titleColumnName = "Title")
library(metagear)
library(here)
metagear::abstract_screener(here::here("literature_screen_pubmed","effort_Jonny_2.csv"), aReviewer = "Jonny", titleColumnName = "Title")
#rescreen maybes
metagear::abstract_screener(here::here("literature_screen_pubmed","effort_Jonny_2.csv"), aReviewer = "Jonny",unscreenedColumnName = "INCLUDE",  titleColumnName = "Title")
?metagear
ef2<-read.csv(here::here("literature_screen_pubmed","effort_Jonny_2.csv"))
effort_initialize(ef2)
metagear::abstract_screener(here::here("literature_screen_pubmed","effort_Jonny.csv"), aReviewer = "Jonny", titleColumnName = "Title")
?effort_initialize()
effort_distribute(ef2, reviewers = "Jonny", effort = 100, initialize = T,save_split = T)
metagear::abstract_screener(here::here("literature_screen_pubmed","effort_Jonny_maybe.csv"), aReviewer = "Jonny",unscreenedColumnName = "INCLUDE", unscreenedColumnName titleColumnName = "Title")
metagear::abstract_screener(here::here("literature_screen_pubmed","effort_Jonny_maybe.csv"), aReviewer = "Jonny",unscreenedColumnName = "INCLUDE", unscreenedColumnName titleColumnName = "Title")
metagear::abstract_screener(here::here("literature_screen_pubmed","effort_Jonny_maybe.csv"), aReviewer = "Jonny",unscreenedColumnName = "INCLUDE", titleColumnName = "Title")
library(tidyverse)
library(tidyverse)
library(here)
Raw_factor_data<-read.csv(here::here("data", "raw_data", "factors_xinyi.csv"))
view(Raw_factor_data)
Raw_factor_data<-read.csv(here::here("data", "raw_data", "factors_xinyi.csv"))[,c(2:79)]
Raw_factor_data<-read.csv(here::here("data", "raw_data", "factors_xinyi.csv"))[c(2:79),]
view(Raw_factor_data)
Raw_factor_data<-read.csv(here::here("data", "raw_data", "factors_xinyi.csv"))[c(3:79),]
view(Raw_factor_data)
Raw_factor_data<-read.csv(here::here("data", "raw_data", "factors_xinyi.csv"))
class(Raw_factor_data)
library(janitor)
row_to_names(row_number = 2)
install.packages("janitor")
library(janitor)
library(magrittr)
Raw_factor_data%<>% row_to_names(row_number = 3)
print(Raw_factor_data)
view(Raw_factor_data)
Raw_factor_data<-read.csv(here::here("data", "raw_data", "factors_xinyi.csv"))
Raw_factor_data%<>% row_to_names(row_number = 2)
view(Raw_factor_data)
library(visdat)
vis_miss(Raw_factor_data)
vis_miss(Raw_factor_data)
visdat::vis_miss(Raw_factor_data)
pairs(Raw_factor_data)
library(tidyverse)
library(here)
library(janitor)
library(magrittr)
library(visdat)
Raw_factor_data<-read.csv(here::here("data", "raw_data", "factors_Xinyi_final.csv"))
Raw_factor_data%<>% row_to_names(row_number = 2)
visdat::vis_miss(Raw_factor_data)
View(Raw_factor_data)
View(Raw_factor_data)
Raw_factor_data<-read.csv(here::here("data", "raw_data", "factors_Xinyi_final.csv"))
View(Raw_factor_data)
Raw_factor_data%<>% row_to_names(row_number = 1)
Raw_factor_data_col<-Raw_factor_data[,-c(36,37,44,54,55,58,59,60,61,62,64,68,70,71,78,82,83,84,87,88,89,90)]
View(Raw_factor_data_col)
glimpse(Raw_factor_data_col)
Raw_factor_data_col<-Raw_factor_data[,-c(36,37,44,54,55,58,59,60,61,62,64,68,70,71,78,82,83,84,87,88,89,90:105)]
View(Raw_factor_data_col)
glimpse(Raw_factor_data_col)
visdat::vis_miss(Raw_factor_data_col)
visdat::vis_miss(Raw_factor_data_col)
pairs(Raw_factor_data_col)
pairs(Raw_factor_data_col[,c(10:20)])
pairs(Raw_factor_data_col[,c(36:40)])
unique(Raw_factor_data_col$Transmission_Mode)
Raw_factor_data_col$Transmission_Mode%<>%as.character()
Raw_factor_data_col$Transmission_Mode[grep("ect/", Raw_factor_data_col$Transmission_Mode)] <- "Direct/Indirect"
unique(Raw_factor_data_col$Transmission_Mode)
Raw_factor_data_col$Transmission_Mode[grep("Indirect ", Raw_factor_data_col$Transmission_Mode)] <- "Indirect"
unique(Raw_factor_data_col$Transmission_Mode)
Raw_factor_data_col$Transmission_Mode[grep("Direct ", Raw_factor_data_col$Transmission_Mode)] <- "Direct"
unique(Raw_factor_data_col$Transmission_Mode)
table(Raw_factor_data_col$Transmission_Mode)
glimpse(Raw_factor_data_col)
summary(Raw_factor_data_col)
Raw_factor_data_col$Transmission_Mode%<>%as.factor()
Raw_factor_data_col$Host_Range%<>%as.character()
Raw_factor_data_col$Host_Range[grep("Broad", Raw_factor_data_col$Host_Range)] <- "Broad"
Raw_factor_data_col$Host_Range[grep("Narrow", Raw_factor_data_col$Host_Range)] <- "Narrow"
unique(Raw_factor_data_col$Host_Range)
Raw_factor_data_col%<>%as.factor()
library(tidyverse)
library(here)
library(janitor)
library(magrittr)
library(visdat)
Raw_factor_data<-read.csv(here::here("data", "raw_data", "factors_Xinyi_final.csv"))
Raw_factor_data%<>% row_to_names(row_number = 1)
Raw_factor_data_col<-Raw_factor_data[,-c(36,37,44,54,55,58,59,60,61,62,64,68,70,71,78,82,83,84,87,88,89,90:105)]
Raw_factor_data_col$Transmission_Mode%<>%as.character() #we had 17 levels for tranmsission, summarised intpo 3 levels
Raw_factor_data_col$Transmission_Mode[grep("ect/", Raw_factor_data_col$Transmission_Mode)] <- "Direct/Indirect"
Raw_factor_data_col$Transmission_Mode[grep("Indirect ", Raw_factor_data_col$Transmission_Mode)] <- "Indirect"
Raw_factor_data_col$Transmission_Mode[grep("Direct ", Raw_factor_data_col$Transmission_Mode)] <- "Direct"
Raw_factor_data_col$Transmission_Mode%<>%as.factor()
Raw_factor_data_col$Host_Range%<>%as.factor()
View(Raw_factor_data_col)
unique(Raw_factor_data_col$Cell_Receptor)
graf<-Raw_factor_data_col[c(1,70),c(54:68)]
View(graf)
graf<-Raw_factor_data_col[c(1,70),c(36:68)]
View(graf)
graf<-Raw_factor_data_col[c(1,72),c(36:68)]
View(graf)
graf<-Raw_factor_data_col[c(69),c(36:68)]
t(graf)
graf%<>%t()
colnames(graf)[1]<-"Factors"
colnames(graf)[2]<-"Percentage"
View(Raw_factor_data)
Raw_factor_data1<-read.csv(here::here("data", "raw_data", "factors_Xinyi_final.csv"))
View(Raw_factor_data1)
Raw_factor_data_col1<-Raw_factor_data1[,-c(36,37,44,54,55,58,59,60,61,62,64,68,70,71,78,82,83,84,87,88,89,90:105)]
graf<-Raw_factor_data_col1[c(69),c(36:68)]
View(graf)
graf<-Raw_factor_data_col1[c(1:70),c(36:68)]
View(graf)
graf<-Raw_factor_data_col1[c(1,70),c(36:68)]
View(graf)
graf%<>%t()
colnames(graf)[1]<-"Factors"
colnames(graf)[2]<-"Percentage"
View(graf)
class(graf)
as.data.frame(graf)
graf%<>%t()%>%as.data.frame()
View(graf)
graf%<>%t()
Raw_factor_data_col1<-Raw_factor_data1[,-c(36,37,44,54,55,58,59,60,61,62,64,68,70,71,78,82,83,84,87,88,89,90:105)]
graf<-Raw_factor_data_col1[c(1,70),c(36:68)]
graf%<>%t()
colnames(graf)[1]<-"Factors"
colnames(graf)[2]<-"Percentage"
graf%<>%as.data.frame()
View(graf)
graf$Percentage%<>%as.character()%>%as.numeric()
Raw_factor_data_col1<-Raw_factor_data1[,-c(36,37,44,54,55,58,59,60,61,62,64,68,70,71,78,82,83,84,87,88,89,90:105)]
graf<-Raw_factor_data_col1[c(1,70),c(36:68)]
graf%<>%t()
colnames(graf)[1]<-"Factors"
colnames(graf)[2]<-"Percentage"
graf%<>%as.data.frame()
graf$Percentage%<>%as.character()
graf$Percentage%<>%str_remove("%")
graf$Percentage%<>%as.numeric()
ggplot(graf, aes(Factors, Percentage))+geom_bar(stat = "identity")
ggplot(graf, aes(fct_infreq(Factors), Percentage))+geom_bar(stat = "identity")
ggplot(graf, aes(Factors, Percentage))+geom_bar(stat = "identity")
ggplot(graf, aes(Factors, Percentage))+geom_bar(stat = "identity")+ theme(axis.text.x = element_text(angle = 90))
ggplot(graf, aes(Factors, Percentage))+geom_bar(stat = "identity")+ theme(axis.text.x = element_text(angle = 90, size=8))
ggplot(graf, aes(Factors, Percentage))+geom_bar(stat = "identity")+ theme(axis.text.x = element_text(angle = 90, size=6))
ggplot(graf, aes(Factors, Percentage))+geom_bar(stat = "identity")+ theme(axis.text.x = element_text(angle = 90, size=7))
?order
graf[order(Percentage)]
asd<-graf[order(Percentage)]
asd<-graf[order("Percentage")]
View(asd)
asd<-graf[order("Percentage"),]
View(asd)
asd<-graf[order(Percentage),]
graf$Percentage%<>%as.numeric()
ggplot(graf, aes(Factors, Percentage))+geom_bar(stat = "identity")+ theme(axis.text.x = element_text(angle = 90, size=7))
